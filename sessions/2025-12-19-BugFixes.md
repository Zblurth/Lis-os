# Session Recap: Color Engine Bug Fixes
## âš¡ Summary
*   **Objective:** Fix Wezterm crash (Alpha channel in ANSI colors) and improve Color Extraction (Black Hole Anchor).
*   **Outcome:** Wezterm config now uses opaque colors for ANSI table. Extraction now filters out extreme black/white pixels (L < 5% or L > 97%) to prevent background noise from hijacking the anchor.

## ðŸ”§ Details
*   **Wezterm:** Swapped `{fg_dim}` (which has 0.7 alpha) for `{fg}` (opaque) in `wezterm.lua` ANSI table.
*   **Extraction:** Added `luma` filtering in `PerceptualExtractor` to enforce `0.05 < L < 0.97` on candidate pixels.
